---
layout: post
title: java中使用tess4j识别图片
categories: [编程, java]
tags: [tess4j, ocr]
---


> `tess4j`是`Tesseract`的`java-api`

#### 1. 引入依赖

```xml
<dependency>
    <groupId>net.sourceforge.tess4j</groupId>
    <artifactId>tess4j</artifactId>
    <version>4.5.1</version>
</dependency>
```

#### 2. 例子

```java
public String recognize(String filename){
    Tesseract tesseract = new Tesseract();
    tesseract.setDatapath("D:/tesseract/data");
    tesseract.setLanguage("eng");
    return tesseract.doOCR(new File(filename));
}
```

> `api`只支持文件

#### 3. 改进

```java
public String recognize(byte[] content, String suffix){
    Tesseract tesseract = new Tesseract();
    tesseract.setDatapath("D:/tesseract/data");
    tesseract.setLanguage("eng");
    File file = null;
    try {
        file = File.createTempFile("tesseract", suffix);
        FileUtils.writeByteArrayToFile(file, bytes);
        return tesseract.doOCR(file);
    } catch (Exception e) {
        //
    }finally {
        FileUtils.deleteQuietly(file);
    }
}
```

> 为了支持传入`bytes`，使用临时文件

#### 4. 关于训练数据

从官方[tesseract-ocr/tessdata](https://github.com/tesseract-ocr/tessdata)下载，测试发现还是有一些识别错误

#### 5. 参考

* [Tess4J](https://github.com/nguyenq/tess4j)